<?php 
/**
 * Template for index action
 * 
 * @category   OntoWiki
 * @package    OntoWiki_extensions_patapro
 * @author     Lars Eidam <larseidam@googlemail.com>
 * @author     Konrad Abicht <konrad@inspirito.de>
 * @copyright  Copyright (c) 2011
 * @license    http://opensource.org/licenses/gpl-license.php GNU General Public License (GPL)
 */
?>
<script type="text/javascript">       
    var url = '<?php echo $this->url; ?>';
    var models = <?php echo json_encode($this->models); ?>;
    var createUrl = url + "model/create";
    var addUrl = url + "model/add";
    var deleteUrl = url + "model/delete/";
</script>

<!-- set the title of the action -->
<?php $this->placeholder('main.window.title')->set($this->_translate->_('ontologieEdit')); ?>

<table>
    <tr>
        <th class="storeModelNameTd"></th>
        <th class="storeModelStatusTd"><?php echo $this->_translate->_('status') . "" ?></th>
        <th class="storeModelHiddenTd"><?php echo $this->_translate->_('hidden') . "" ?></th>
        <th class="storeModelButtonTd"></th>
        <th class="storeModelProcessTd"></th>
    </tr>
	<tr>
		<td class="storeModelNameTd">
            <span class="storeModelNameSpan">All</span>
        </td>
        <td class="storeModelStatusTd">
        </td>
		<td class="storeModelHiddenTd">
        </td>
        <td class="storeModelButtonTd">
            <a id="addResource" class="button" onclick="javascript:renewAllModel('all')">
                Renew 
            </a>
            <a id="addResource" class="button" onclick="javascript:renewAllModel('add')">
                Add
            </a>
            <a id="addResource" class="button" onclick="javascript:renewAllModel('delete')">
                Delete
            </a>
        </td>
        <td class="storeModelProcessTd">
            <div id="responseAll"></div>
        </td>
	</tr>
	<?php foreach($this->models as $modelName => $modelData) { ?>
        <tr>
            <?php if ('namespaces' != $modelName) { ?>
                <td class="storeModelNameTd">
                    <span class="storeModelNameSpan"><?php echo $modelName; ?></span>
                </td>
                <td class="storeModelStatusTd">
                    <?php
                        $availableClass = "storeHidden ";
                        $notAvailableClass = "";
                        if (isset($this->storedModels[$modelData['namespace']])) {
                            $availableClass = "";
                            $notAvailableClass = "storeHidden ";
                        }
                    ?>
                    <div id="model<?php echo $modelName ?>StatusA" class="<?php echo $availableClass ?>storeModelAvailable"><?php echo $this->_translate->_('available') . "" ?></div>
                    <div id="model<?php echo $modelName ?>StatusNA" class="<?php echo $notAvailableClass ?>storeModelNotAvailable"><?php echo $this->_translate->_('notavailable') . "" ?></div>
                </td>
                <td class="storeModelHiddenTd">
                    <?php
                        $hiddenDefault = '';
                        if (isset($modelData['options'])) {
                            $hiddenDefault = (in_array('hidden', $modelData['options']) ? 'checked="checked"' : '');
                        }
                        ?>
                    <input id="model<?php echo $modelName ?>Hidden" class="checkbox" type="checkbox" name="hidden" value="true" <?php echo $hiddenDefault ?>>
                </td>
                <td class="storeModelButtonTd">
                    <?php
                        if (isset($this->storedModels[$modelData['namespace']])) {
                            $hiddenAddClass = "storeHidden ";
                            $hiddenRemoveClass = "";
                        } else {
                            $hiddenAddClass = "";
                            $hiddenRemoveClass = "storeHidden ";
                        }
                    ?>
                    <a id="model<?php echo $modelName ?>RenewA" class="<?php echo $hiddenRemoveClass ?>button" onclick="javascript:renewModel('<?php echo $modelName; ?>', 'all')">
                        Renew
                    </a>
                    <div id="model<?php echo $modelName ?>RenewDiv" class="<?php echo $hiddenAddClass ?> storeDisabledButton">
                        Renew
                    </div>
                    <a id="model<?php echo $modelName ?>AddA" class="<?php echo $hiddenAddClass ?> button" onclick="javascript:renewModel('<?php echo $modelName; ?>', 'add')">
                        Add
                    </a>
                    <div id="model<?php echo $modelName ?>AddDiv" class="<?php echo $hiddenRemoveClass ?>storeDisabledButton">
                        Add
                    </div>
                    <a id="model<?php echo $modelName ?>DeleteA" class="<?php echo $hiddenRemoveClass ?>button" onclick="javascript:renewModel('<?php echo $modelName; ?>', 'delete')">
                        Delete
                    </a>
                    <div id="model<?php echo $modelName ?>DeleteDiv" class="<?php echo $hiddenAddClass ?>storeDisabledButton">
                        Delete
                    </div>
                </td>
                <td class="storeModelProcessTd">
                    <div id="response<?php echo $modelName; ?>"></div>
                </td>
            <?php } ?>
        </tr>    
	<?php } ?>
    <tr><td><br /></td></tr>
    <tr>
        <td class="storeModelNameTd">
            Backup old ontologies?
        </td>
        <td class="storeModelStatusTd">
        </td>
		<td class="storeModelHiddenTd">
        </td>
        <td class="storeModelButtonTd">
            <input id="storeBackup" class="checkbox" type="checkbox" name="backup" value="true" checked="checked">
        </td>
        <td>
        </td>
    </tr>
</table>


